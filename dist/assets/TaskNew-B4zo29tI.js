import{n as t}from"./rolldown-runtime-A1xW-pDA.js";import{P as s,V as a,mt as e,vt as r}from"./react-vendor-BrW68ebb.js";import"./supabase-vendor-CLitCmdP.js";import{i as o}from"./index-BngHtetc.js";import"./NotificationBell-D0CR4O40.js";import{t as i}from"./Layout-DFNvthLu.js";import{t as n}from"./TaskForm-D9lQAQVY.js";var l=t(r(),1),c=a();const m=()=>{const t=e(),[a,r]=(0,l.useState)(!1);return(0,c.jsx)(i,{children:(0,c.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,c.jsxs)("button",{onClick:()=>t("/tasks"),className:"inline-flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors [&>svg]:w-4 [&>svg]:h-4",children:[(0,c.jsx)(s,{className:"h-4 w-4"}),"Görevlere Dön"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Yeni Görev Oluştur"}),(0,c.jsx)("p",{className:"mt-1 text-slate-400",children:"Yeni bir görev oluşturun ve atayın"})]}),(0,c.jsx)("div",{className:"glass-card p-6 rounded-xl",children:(0,c.jsx)(n,{onSubmit:async s=>{try{r(!0);const{data:{session:a}}=await o.auth.getSession();if(!a)return void alert("Oturum bulunamadı");const e=await fetch("http://localhost:3001/api/tasks",{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok){const t=await e.json();throw new Error(t.message||"Görev oluşturulamadı")}t(`/tasks/${(await e.json()).data.id}`)}catch(a){alert(a instanceof Error?a.message:"Görev oluşturulamadı")}finally{r(!1)}},onCancel:()=>t("/tasks"),isLoading:a})})]})})};export{m as TaskNew};