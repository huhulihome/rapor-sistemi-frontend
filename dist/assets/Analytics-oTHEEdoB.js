import{A as e,C as t,E as s,I as a,J as r,K as l,Q as i,W as n,Y as d,Z as c,et as o,jt as m,k as x,m as h,o as p,p as g,y as u}from"./react-vendor-2hQaKJT0.js";import"./supabase-vendor-CLitCmdP.js";import{a as b,t as j}from"./index-B1OELnp-.js";import"./NotificationBell-CcWohExe.js";import{t as y}from"./Layout-3bhG6fzF.js";import{n as f,t as v}from"./Modal-DnIZetdV.js";import{t as N}from"./Card-CSBg1RCz.js";var k=m(),w=o();const _=({onApplyFilters:e,onClearFilters:s,savedPresets:a=[],onSavePreset:r,onLoadPreset:l})=>{const[i,n]=(0,k.useState)(!1),[d,c]=(0,k.useState)({}),[o,m]=(0,k.useState)(""),[x,h]=(0,k.useState)(!1),g=(e,t)=>{c(s=>({...s,dateRange:{...s.dateRange,start:"start"===e?t:s.dateRange?.start||"",end:"end"===e?t:s.dateRange?.end||""}}))},u=(e,t)=>{c(s=>{const a=s[e]||[],r=a.includes(t)?a.filter(e=>e!==t):[...a,t];return{...s,[e]:r.length>0?r:void 0}})},b=Object.keys(d).filter(e=>{const t=d[e];return Array.isArray(t)?t.length>0:"object"==typeof t?Object.keys(t).length>0:!!t}).length;return(0,w.jsx)(N,{padding:"md",children:(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(t,{className:"h-5 w-5 text-gray-600"}),(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Gelişmiş Filtreler"}),b>0&&(0,w.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold text-blue-800 bg-blue-100 rounded-full",children:[b," aktif"]})]}),(0,w.jsx)("button",{onClick:()=>n(!i),className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:i?"Gizle":"Göster"})]}),a.length>0&&(0,w.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,w.jsx)("span",{className:"text-sm text-gray-600",children:"Kayıtlı Filtreler:"}),a.map(e=>(0,w.jsx)("button",{onClick:()=>(e=>{c(e.filters),l&&l(e)})(e),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",children:e.name},e.id))]}),i&&(0,w.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarih Aralığı"}),(0,w.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Başlangıç"}),(0,w.jsx)("input",{type:"date",value:d.dateRange?.start||"",onChange:e=>g("start",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Bitiş"}),(0,w.jsx)("input",{type:"date",value:d.dateRange?.end||"",onChange:e=>g("end",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum"}),(0,w.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["not_started","in_progress","completed","blocked"].map(e=>(0,w.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,w.jsx)("input",{type:"checkbox",checked:(d.status||[]).includes(e),onChange:()=>u("status",e),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,w.jsxs)("span",{className:"text-sm text-gray-700",children:["not_started"===e&&"Başlamadı","in_progress"===e&&"Devam Ediyor","completed"===e&&"Tamamlandı","blocked"===e&&"Engellendi"]})]},e))})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öncelik"}),(0,w.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["low","medium","high","critical"].map(e=>(0,w.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,w.jsx)("input",{type:"checkbox",checked:(d.priority||[]).includes(e),onChange:()=>u("priority",e),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,w.jsxs)("span",{className:"text-sm text-gray-700",children:["low"===e&&"Düşük","medium"===e&&"Orta","high"===e&&"Yüksek","critical"===e&&"Kritik"]})]},e))})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),(0,w.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["routine","project","one_time","issue_resolution"].map(e=>(0,w.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,w.jsx)("input",{type:"checkbox",checked:(d.category||[]).includes(e),onChange:()=>u("category",e),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,w.jsxs)("span",{className:"text-sm text-gray-700",children:["routine"===e&&"Rutin","project"===e&&"Proje","one_time"===e&&"Tek Seferlik","issue_resolution"===e&&"Sorun Çözümü"]})]},e))})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,w.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,w.jsx)(f,{variant:"primary",onClick:()=>{e(d),n(!1)},children:"Filtreleri Uygula"}),(0,w.jsxs)(f,{variant:"secondary",onClick:()=>{c({}),s()},children:[(0,w.jsx)(p,{className:"h-4 w-4 mr-1"}),"Temizle"]})]}),r&&(0,w.jsx)("button",{onClick:()=>h(!x),className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:"Filtreyi Kaydet"})]}),x&&r&&(0,w.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,w.jsx)("input",{type:"text",value:o,onChange:e=>m(e.target.value),placeholder:"Filtre adı...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),(0,w.jsx)(f,{variant:"primary",onClick:()=>{o.trim()&&r&&(r(o.trim(),d),m(""),h(!1))},disabled:!o.trim(),children:"Kaydet"})]})]})]})})},T=(e,t="tasks-export.csv")=>{const s=e.map(e=>[e.id,e.title,e.description||"",D(e.category),C(e.priority),O(e.status),e.progress_percentage,e.assigned_to_profile?.full_name||"",e.created_by_profile?.full_name||"",e.due_date?new Date(e.due_date).toLocaleDateString("tr-TR"):"",new Date(e.created_at).toLocaleDateString("tr-TR"),new Date(e.updated_at).toLocaleDateString("tr-TR")]),a=[["ID","Başlık","Açıklama","Kategori","Öncelik","Durum","İlerleme (%)","Atanan Kişi","Oluşturan","Bitiş Tarihi","Oluşturulma Tarihi","Güncellenme Tarihi"].join(","),...s.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n"),r=new Blob(["\ufeff"+a],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),i=URL.createObjectURL(r);l.setAttribute("href",i),l.setAttribute("download",t),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},S=(e,t="tasks-report.pdf")=>{const s=`\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="UTF-8">\n      <title>Görev Raporu</title>\n      <style>\n        body {\n          font-family: Arial, sans-serif;\n          margin: 20px;\n          color: #333;\n        }\n        h1 {\n          color: #2563eb;\n          border-bottom: 2px solid #2563eb;\n          padding-bottom: 10px;\n        }\n        .summary {\n          background: #f3f4f6;\n          padding: 15px;\n          border-radius: 8px;\n          margin: 20px 0;\n        }\n        .summary-item {\n          display: inline-block;\n          margin-right: 30px;\n        }\n        table {\n          width: 100%;\n          border-collapse: collapse;\n          margin-top: 20px;\n        }\n        th {\n          background: #2563eb;\n          color: white;\n          padding: 12px;\n          text-align: left;\n          font-weight: 600;\n        }\n        td {\n          padding: 10px;\n          border-bottom: 1px solid #e5e7eb;\n        }\n        tr:hover {\n          background: #f9fafb;\n        }\n        .priority-critical { color: #dc2626; font-weight: bold; }\n        .priority-high { color: #ea580c; font-weight: bold; }\n        .priority-medium { color: #ca8a04; }\n        .priority-low { color: #16a34a; }\n        .status-completed { color: #16a34a; }\n        .status-in-progress { color: #2563eb; }\n        .status-blocked { color: #dc2626; }\n        .footer {\n          margin-top: 30px;\n          text-align: center;\n          color: #6b7280;\n          font-size: 12px;\n        }\n      </style>\n    </head>\n    <body>\n      <h1>Görev Raporu</h1>\n      <p>Oluşturulma Tarihi: ${(new Date).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}</p>\n      \n      <div class="summary">\n        <div class="summary-item">\n          <strong>Toplam Görev:</strong> ${e.length}\n        </div>\n        <div class="summary-item">\n          <strong>Tamamlanan:</strong> ${e.filter(e=>"completed"===e.status).length}\n        </div>\n        <div class="summary-item">\n          <strong>Devam Eden:</strong> ${e.filter(e=>"in_progress"===e.status).length}\n        </div>\n        <div class="summary-item">\n          <strong>Tamamlanma Oranı:</strong> ${Math.round(e.filter(e=>"completed"===e.status).length/e.length*100)}%\n        </div>\n      </div>\n\n      <table>\n        <thead>\n          <tr>\n            <th>Başlık</th>\n            <th>Kategori</th>\n            <th>Öncelik</th>\n            <th>Durum</th>\n            <th>İlerleme</th>\n            <th>Atanan</th>\n            <th>Bitiş Tarihi</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${e.map(e=>`\n            <tr>\n              <td><strong>${$(e.title)}</strong></td>\n              <td>${D(e.category)}</td>\n              <td class="priority-${e.priority}">${C(e.priority)}</td>\n              <td class="status-${e.status.replace("_","-")}">${O(e.status)}</td>\n              <td>${e.progress_percentage}%</td>\n              <td>${$(e.assigned_to_profile?.full_name||"-")}</td>\n              <td>${e.due_date?new Date(e.due_date).toLocaleDateString("tr-TR"):"-"}</td>\n            </tr>\n          `).join("")}\n        </tbody>\n      </table>\n\n      <div class="footer">\n        <p>Modern Office System - Görev Yönetim Raporu</p>\n      </div>\n    </body>\n    </html>\n  `,a=window.open("","_blank");a&&(a.document.write(s),a.document.close(),a.onload=()=>{a.print()})};function D(e){return{routine:"Rutin",project:"Proje",one_time:"Tek Seferlik",issue_resolution:"Sorun Çözümü"}[e]||e}function C(e){return{low:"Düşük",medium:"Orta",high:"Yüksek",critical:"Kritik"}[e]||e}function O(e){return{not_started:"Başlamadı",in_progress:"Devam Ediyor",completed:"Tamamlandı",blocked:"Engellendi"}[e]||e}function $(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}const R=({tasks:e,disabled:t=!1})=>{const[s,a]=(0,k.useState)(!1),[l,i]=(0,k.useState)(["title","category","priority","status","assigned_to_profile","due_date"]),n=()=>{T(e,`gorevler-${(new Date).toISOString().split("T")[0]}.csv`)},o=()=>{S(e,`gorev-raporu-${(new Date).toISOString().split("T")[0]}.pdf`)},m=t=>{const s="csv"===t?`gorevler-ozel-${(new Date).toISOString().split("T")[0]}.csv`:`gorev-raporu-ozel-${(new Date).toISOString().split("T")[0]}.pdf`;"csv"===t?T(e,s):S(e,s),a(!1)};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(d,{as:"div",className:"relative inline-block text-left",children:[(0,w.jsxs)(d.Button,{as:f,variant:"secondary",disabled:t||0===e.length,children:[(0,w.jsx)(r,{className:"h-5 w-5 mr-2"}),"Dışa Aktar"]}),(0,w.jsx)(c,{as:k.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,w.jsx)(d.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,w.jsxs)("div",{className:"py-1",children:[(0,w.jsx)(d.Item,{children:({active:e})=>(0,w.jsxs)("button",{onClick:n,className:(e?"bg-gray-100 text-gray-900":"text-gray-700")+" group flex items-center w-full px-4 py-2 text-sm",children:[(0,w.jsx)(h,{className:"mr-3 h-5 w-5 text-gray-400"}),"CSV olarak indir"]})}),(0,w.jsx)(d.Item,{children:({active:e})=>(0,w.jsxs)("button",{onClick:o,className:(e?"bg-gray-100 text-gray-900":"text-gray-700")+" group flex items-center w-full px-4 py-2 text-sm",children:[(0,w.jsx)(x,{className:"mr-3 h-5 w-5 text-gray-400"}),"PDF raporu oluştur"]})}),(0,w.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,w.jsx)(d.Item,{children:({active:e})=>(0,w.jsxs)("button",{onClick:()=>a(!0),className:(e?"bg-gray-100 text-gray-900":"text-gray-700")+" group flex items-center w-full px-4 py-2 text-sm",children:[(0,w.jsx)(r,{className:"mr-3 h-5 w-5 text-gray-400"}),"Özel rapor oluştur"]})})]})})})]}),(0,w.jsx)(v,{isOpen:s,onClose:()=>a(!1),title:"Özel Rapor Oluştur",children:(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsx)("p",{className:"text-sm text-gray-600",children:"Rapora dahil etmek istediğiniz alanları seçin:"}),(0,w.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[{key:"title",label:"Başlık"},{key:"description",label:"Açıklama"},{key:"category",label:"Kategori"},{key:"priority",label:"Öncelik"},{key:"status",label:"Durum"},{key:"progress_percentage",label:"İlerleme"},{key:"assigned_to_profile",label:"Atanan Kişi"},{key:"created_by_profile",label:"Oluşturan"},{key:"due_date",label:"Bitiş Tarihi"},{key:"created_at",label:"Oluşturulma Tarihi"},{key:"updated_at",label:"Güncellenme Tarihi"}].map(e=>(0,w.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,w.jsx)("input",{type:"checkbox",checked:l.includes(e.key),onChange:()=>{return t=e.key,void i(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,w.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.key))}),(0,w.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,w.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Format seçin:"}),(0,w.jsxs)("div",{className:"flex space-x-3",children:[(0,w.jsxs)(f,{variant:"secondary",onClick:()=>m("csv"),disabled:0===l.length,children:[(0,w.jsx)(h,{className:"h-5 w-5 mr-2"}),"CSV"]}),(0,w.jsxs)(f,{variant:"secondary",onClick:()=>m("pdf"),disabled:0===l.length,children:[(0,w.jsx)(x,{className:"h-5 w-5 mr-2"}),"PDF"]})]})]}),(0,w.jsx)("div",{className:"flex justify-end pt-4 border-t border-gray-200",children:(0,w.jsx)(f,{variant:"secondary",onClick:()=>a(!1),children:"İptal"})})]})})]})};var F=async()=>{const{data:{session:e}}=await b.auth.getSession();if(!e)throw new Error("No active session");const t=await fetch("https://rapor-sistemi-backend.onrender.com/api/analytics/overview",{headers:{Authorization:`Bearer ${e.access_token}`}});if(!t.ok)throw new Error("Failed to fetch overview");return(await t.json()).data},A={critical:"bg-red-500",high:"bg-orange-500",medium:"bg-amber-500",low:"bg-slate-500"},z={critical:"Kritik",high:"Yüksek",medium:"Orta",low:"Düşük"},E={completed:"Tamamlandı",in_progress:"Devam Ediyor",blocked:"Engellendi",not_started:"Başlamadı"},B={completed:"bg-emerald-500/20 text-emerald-400",in_progress:"bg-blue-500/20 text-blue-400",blocked:"bg-red-500/20 text-red-400",not_started:"bg-slate-500/20 text-slate-400"};const P=()=>{const[t,r]=(0,k.useState)(!1),[d,c]=(0,k.useState)({}),[o,m]=(0,k.useState)(()=>{const e=localStorage.getItem("filterPresets");return e?JSON.parse(e):[]}),{data:x,isLoading:h}=i({queryKey:["analytics-overview"],queryFn:F,refetchInterval:12e4}),p=Object.keys(d).filter(e=>{const t=d[e];return Array.isArray(t)?t.length>0:"object"==typeof t?Object.keys(t).length>0:!!t}).length,{data:f,isLoading:v}=i({queryKey:["filtered-tasks",d],queryFn:()=>(async e=>{const{data:{session:t}}=await b.auth.getSession();if(!t)throw new Error("No active session");const s=new URLSearchParams;e.status&&e.status.length>0&&e.status.forEach(e=>s.append("status",e)),e.priority&&e.priority.length>0&&e.priority.forEach(e=>s.append("priority",e)),e.category&&e.category.length>0&&e.category.forEach(e=>s.append("category",e)),e.assignedTo&&s.append("assigned_to",e.assignedTo);const a=await fetch(`https://rapor-sistemi-backend.onrender.com/api/tasks?${s.toString()}`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!a.ok)throw new Error("Failed to fetch filtered tasks");return(await a.json()).data||[]})(d),enabled:p>0});return(0,w.jsx)(y,{children:(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Analitik ve Raporlama"}),(0,w.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Otomatik analizler, grafikler ve öneriler"})]}),(0,w.jsx)("button",{onClick:()=>r(!t),className:"px-4 py-2 text-sm font-medium text-white bg-slate-800 rounded-lg hover:bg-slate-700 transition-colors",children:t?"Filtreleri Gizle":"Gelişmiş Filtreler"})]}),h?(0,w.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,w.jsx)(j,{size:"lg",message:"Analizler yükleniyor..."})}):x?(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,w.jsx)("div",{className:"glass-card p-4",children:(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:(0,w.jsx)(a,{className:"w-6 h-6 text-blue-400"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-2xl font-bold text-white",children:x.summary.totalTasks}),(0,w.jsx)("p",{className:"text-xs text-slate-400",children:"Toplam Görev"})]})]})}),(0,w.jsx)("div",{className:"glass-card p-4",children:(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("div",{className:"p-2 bg-emerald-500/20 rounded-lg",children:(0,w.jsx)(n,{className:"w-6 h-6 text-emerald-400"})}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("p",{className:"text-2xl font-bold text-white",children:[x.summary.completionRate,"%"]}),(0,w.jsx)("p",{className:"text-xs text-slate-400",children:"Tamamlama Oranı"})]})]})}),(0,w.jsx)("div",{className:"glass-card p-4",children:(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("div",{className:"p-2 bg-red-500/20 rounded-lg",children:(0,w.jsx)(s,{className:"w-6 h-6 text-red-400"})}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-2xl font-bold text-white",children:x.summary.overdueTasks}),(0,w.jsx)("p",{className:"text-xs text-slate-400",children:"Geciken"})]})]})}),(0,w.jsx)("div",{className:"glass-card p-4",children:(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:(0,w.jsx)(l,{className:"w-6 h-6 text-purple-400"})}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("p",{className:"text-2xl font-bold text-white",children:[x.summary.recurringRate,"%"]}),(0,w.jsx)("p",{className:"text-xs text-slate-400",children:"Rutin Oranı"})]})]})})]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,w.jsxs)("div",{className:"glass-card p-5",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(a,{className:"w-5 h-5 text-purple-400"}),"Öncelik Dağılımı"]}),(0,w.jsx)("div",{className:"space-y-3",children:Object.entries(x.distributions.byPriority).map(([e,t])=>{const s=Object.values(x.distributions.byPriority).reduce((e,t)=>e+t,0),a=s>0?Math.round(t/s*100):0;return(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("span",{className:"w-20 text-sm text-slate-300",children:z[e]}),(0,w.jsx)("div",{className:"flex-1 h-3 bg-slate-700 rounded-full overflow-hidden",children:(0,w.jsx)("div",{className:`h-full ${A[e]} transition-all duration-500`,style:{width:`${a}%`}})}),(0,w.jsxs)("span",{className:"w-16 text-sm text-right text-slate-400",children:[t," (",a,"%)"]})]},e)})})]}),(0,w.jsxs)("div",{className:"glass-card p-5",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(g,{className:"w-5 h-5 text-blue-400"}),"Etiketlere Göre Dağılım"]}),(0,w.jsx)("div",{className:"space-y-2",children:x.distributions.byTag.slice(0,6).map(e=>(0,w.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-800/50 transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),(0,w.jsx)("span",{className:"text-sm text-white",children:e.name})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("span",{className:"text-sm text-slate-400",children:[e.value," görev"]}),e.overdue>0&&(0,w.jsxs)("span",{className:"px-2 py-0.5 bg-red-500/20 text-red-400 text-xs rounded",children:[e.overdue," geciken"]})]})]},e.name))})]})]}),(0,w.jsxs)("div",{className:"glass-card p-5",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(e,{className:"w-5 h-5 text-amber-400"}),"Haftalık Özet"]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,w.jsxs)("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[(0,w.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:x.weekly.completedThisWeek}),(0,w.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Bu Hafta Tamamlanan"})]}),(0,w.jsxs)("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[(0,w.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:x.weekly.createdThisWeek}),(0,w.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Bu Hafta Oluşturulan"})]}),(0,w.jsxs)("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl",children:[(0,w.jsxs)("p",{className:"text-3xl font-bold text-purple-400",children:[x.weekly.productivity,"%"]}),(0,w.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Verimlilik"})]})]})]}),x.insights.length>0&&(0,w.jsxs)("div",{className:"glass-card p-5 border-l-4 border-l-amber-500",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(u,{className:"w-5 h-5 text-amber-400"}),"Öneriler ve İçgörüler"]}),(0,w.jsx)("div",{className:"space-y-3",children:x.insights.map((e,t)=>(0,w.jsx)("div",{className:"flex items-start gap-3 p-3 bg-slate-800/50 rounded-lg",children:(0,w.jsx)("p",{className:"text-sm text-slate-300",children:e})},t))})]}),x.problematicTags.length>0&&(0,w.jsxs)("div",{className:"glass-card p-5 border-l-4 border-l-red-500",children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,w.jsx)(s,{className:"w-5 h-5 text-red-400"}),"Dikkat Gerektiren Alanlar"]}),(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.problematicTags.map(e=>(0,w.jsxs)("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-xl",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,w.jsx)("span",{className:"font-medium text-white",children:e.tag}),(0,w.jsxs)("span",{className:"text-red-400 text-sm",children:[e.overdueRate,"% gecikme"]})]}),(0,w.jsxs)("p",{className:"text-sm text-slate-400",children:[e.overdueTasks," / ",e.totalTasks," görev gecikmiş"]})]},e.tag))})]})]}):(0,w.jsx)("div",{className:"glass-card p-6 text-center",children:(0,w.jsx)("p",{className:"text-slate-400",children:"Analiz verileri yüklenemedi."})}),t&&(0,w.jsxs)("div",{className:"border-t border-white/10 pt-6",children:[(0,w.jsx)(_,{onApplyFilters:c,onClearFilters:()=>c({}),savedPresets:o,onSavePreset:(e,t)=>{const s={id:Date.now().toString(),name:e,filters:t},a=[...o,s];m(a),localStorage.setItem("filterPresets",JSON.stringify(a))},onLoadPreset:e=>c(e.filters)}),p>0&&(0,w.jsx)("div",{className:"mt-6 space-y-4",children:v?(0,w.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,w.jsx)(j,{size:"md"})}):f&&f.length>0?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"glass-card p-4 flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-sm text-slate-400",children:"Filtre Sonuçları"}),(0,w.jsxs)("p",{className:"text-xl font-bold text-white",children:[f.length," görev"]})]}),(0,w.jsx)(R,{tasks:f})]}),(0,w.jsx)("div",{className:"glass-card divide-y divide-white/5",children:f.map(e=>(0,w.jsx)("div",{className:"p-4 hover:bg-white/5 transition-colors",children:(0,w.jsxs)("div",{className:"flex items-start justify-between",children:[(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("h4",{className:"font-medium text-white",children:e.title}),(0,w.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,w.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${B[e.status]}`,children:E[e.status]}),(0,w.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs bg-${A[e.priority]}/20 text-${A[e.priority].replace("bg-","")}`,children:z[e.priority]})]})]}),e.due_date&&(0,w.jsx)("span",{className:"text-sm text-slate-500",children:new Date(e.due_date).toLocaleDateString("tr-TR")})]})},e.id))})]}):(0,w.jsx)("div",{className:"glass-card p-6 text-center",children:(0,w.jsx)("p",{className:"text-slate-400",children:"Seçilen filtrelere uygun görev bulunamadı."})})})]})]})})};export{P as Analytics};