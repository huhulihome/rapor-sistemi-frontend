import{n as t}from"./rolldown-runtime-A1xW-pDA.js";import{Dt as s,et as a,jt as e,q as i}from"./react-vendor-2hQaKJT0.js";import"./supabase-vendor-CLitCmdP.js";import{a as r,i as n}from"./index-4_19cBdp.js";import"./NotificationBell-DOonUTZz.js";import{t as o}from"./Layout-Dciw3jEd.js";import{t as l}from"./TaskForm-CYZZnEIZ.js";var m=t(e(),1),c=a();const d=()=>{const t=s(),{isAdmin:a}=n(),[e,d]=(0,m.useState)(!1);return(0,c.jsx)(o,{children:(0,c.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,c.jsxs)("button",{onClick:()=>t("/tasks"),className:"inline-flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors [&>svg]:w-4 [&>svg]:h-4",children:[(0,c.jsx)(i,{className:"h-4 w-4"}),"Görevlere Dön"]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:a?"Yeni Görev Oluştur":"Kendime Görev Ekle"}),(0,c.jsx)("p",{className:"mt-1 text-slate-400",children:a?"Yeni bir görev oluşturun ve istediğiniz kişiye atayın":"Kendinize yeni bir görev oluşturun. Başka birine iş atamak için Sorunlar sayfasını kullanın."})]}),(0,c.jsx)("div",{className:"glass-card p-6 rounded-xl",children:(0,c.jsx)(l,{onSubmit:async s=>{try{d(!0);const{data:{session:a}}=await r.auth.getSession();if(!a)return void alert("Oturum bulunamadı");const e=await fetch("http://localhost:3001/api/tasks",{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(!e.ok){const t=await e.json();throw new Error(t.message||"Görev oluşturulamadı")}t(`/tasks/${(await e.json()).data.id}`)}catch(a){alert(a instanceof Error?a.message:"Görev oluşturulamadı")}finally{d(!1)}},onCancel:()=>t("/tasks"),isLoading:e})})]})})};export{d as TaskNew};