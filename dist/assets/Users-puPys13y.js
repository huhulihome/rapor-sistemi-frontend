import{V as e,c as s,f as l,m as t,vt as a,x as r}from"./react-vendor-BrW68ebb.js";import"./supabase-vendor-CLitCmdP.js";import{i,r as n,t as c}from"./index-BngHtetc.js";import"./NotificationBell-D0CR4O40.js";import{t as o}from"./Layout-DFNvthLu.js";var d=a(),x=e();const m=()=>{const{isAdmin:e}=n(),[a,m]=(0,d.useState)([]),[h,u]=(0,d.useState)(!0),[p,j]=(0,d.useState)(""),[f,v]=(0,d.useState)("all");(0,d.useEffect)(()=>{b()},[]);const b=async()=>{try{u(!0);const{data:e,error:s}=await i.from("profiles").select("*").order("full_name",{ascending:!0});if(s)throw s;m(e||[])}catch(e){}finally{u(!1)}},g=a.filter(e=>{const s=e.full_name?.toLowerCase().includes(p.toLowerCase())||e.email?.toLowerCase().includes(p.toLowerCase()),l="all"===f||e.role===f;return s&&l}),N={admin:"bg-purple-500/20 text-purple-400",employee:"bg-blue-500/20 text-blue-400"};return e?(0,x.jsx)(o,{children:(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Kullanıcı Yönetimi"}),(0,x.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:"Tüm kullanıcıları görüntüleyin ve rollerini yönetin"})]}),(0,x.jsxs)("div",{className:"text-right",children:[(0,x.jsx)("p",{className:"text-2xl font-bold text-white",children:a.length}),(0,x.jsx)("p",{className:"text-sm text-slate-400",children:"Toplam Kullanıcı"})]})]}),(0,x.jsx)("div",{className:"glass-card p-4",children:(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,x.jsxs)("div",{className:"relative flex-1",children:[(0,x.jsx)(t,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,x.jsx)("input",{type:"text",placeholder:"İsim veya email ara...",value:p,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-800 border border-white/10 rounded-lg text-white placeholder-slate-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors"})]}),(0,x.jsxs)("select",{value:f,onChange:e=>v(e.target.value),className:"px-4 py-2.5 bg-slate-800 border border-white/10 rounded-lg text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors",children:[(0,x.jsx)("option",{value:"all",children:"Tüm Roller"}),(0,x.jsx)("option",{value:"admin",children:"Admin"}),(0,x.jsx)("option",{value:"employee",children:"Çalışan"})]})]})}),h?(0,x.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,x.jsx)(c,{size:"lg"})}):0===g.length?(0,x.jsxs)("div",{className:"glass-card p-8 text-center",children:[(0,x.jsx)(s,{className:"w-12 h-12 text-slate-500 mx-auto mb-4"}),(0,x.jsx)("p",{className:"text-slate-400",children:"Kullanıcı bulunamadı"})]}):(0,x.jsx)("div",{className:"glass-card overflow-hidden",children:(0,x.jsx)("div",{className:"divide-y divide-white/5",children:g.map(e=>(0,x.jsx)("div",{className:"p-4 hover:bg-white/5 transition-colors",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center gap-4",children:[e.avatar_url?(0,x.jsx)("img",{src:e.avatar_url,alt:e.full_name,className:"w-12 h-12 rounded-xl object-cover border border-white/10"}):(0,x.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center",children:(0,x.jsx)("span",{className:"text-lg font-bold text-white",children:e.full_name?.charAt(0).toUpperCase()||"?"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-white font-medium",children:e.full_name}),(0,x.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[(0,x.jsx)(r,{className:"w-4 h-4"}),e.email]}),e.department&&(0,x.jsx)("p",{className:"text-xs text-slate-500 mt-0.5",children:e.department})]})]}),(0,x.jsxs)("div",{className:"flex items-center gap-4",children:[(0,x.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${N[e.role]||N.employee}`,children:"admin"===e.role?"Admin":"Çalışan"}),(0,x.jsxs)("select",{value:e.role,onChange:s=>(async(e,s)=>{try{const{error:l}=await i.from("profiles").update({role:s}).eq("id",e);if(l)throw l;m(a.map(l=>l.id===e?{...l,role:s}:l))}catch(l){}})(e.id,s.target.value),className:"px-3 py-1.5 bg-slate-800 border border-white/10 rounded-lg text-sm text-white focus:border-blue-500 outline-none",children:[(0,x.jsx)("option",{value:"employee",children:"Çalışan"}),(0,x.jsx)("option",{value:"admin",children:"Admin"})]})]})]})},e.id))})})]})}):(0,x.jsx)(o,{children:(0,x.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,x.jsxs)("div",{className:"glass-card p-8 text-center",children:[(0,x.jsx)(l,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),(0,x.jsx)("h2",{className:"text-xl font-semibold text-white mb-2",children:"Yetkisiz Erişim"}),(0,x.jsx)("p",{className:"text-slate-400",children:"Bu sayfayı görüntüleme yetkiniz yok."})]})})})};export{m as Users};