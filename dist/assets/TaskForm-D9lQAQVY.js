import{n as e}from"./rolldown-runtime-A1xW-pDA.js";import{N as a,V as r,vt as t}from"./react-vendor-BrW68ebb.js";import{i as s}from"./index-BngHtetc.js";var l=e(t(),1),i=r();const n=({onSubmit:e,onCancel:r,initialData:t,isLoading:n=!1})=>{const[o,d]=(0,l.useState)({title:t?.title||"",description:t?.description||"",category:t?.category||"one_time",priority:t?.priority||"medium",assigned_to:t?.assigned_to||"",due_date:t?.due_date||"",estimated_hours:t?.estimated_hours||void 0,tags:t?.tags||[],is_recurring:!1,recurrence_pattern:"weekly",recurrence_interval:1,task_type:"one_time"}),[c,u]=(0,l.useState)([]),[h,m]=(0,l.useState)("");(0,l.useEffect)(()=>{p()},[]),(0,l.useEffect)(()=>{"routine"===o.category?d(e=>({...e,task_type:"routine",is_recurring:!0})):"project"===o.category?d(e=>({...e,task_type:"project",is_recurring:!1})):d(e=>({...e,task_type:"one_time",is_recurring:!1}))},[o.category]);const p=async()=>{try{const{data:e,error:a}=await s.from("profiles").select("id, full_name, email, role").order("full_name");if(a)throw a;u(e||[])}catch(e){}},x=(e,a)=>{d(r=>({...r,[e]:a}))},g=()=>{h.trim()&&!o.tags?.includes(h.trim())&&(x("tags",[...o.tags||[],h.trim()]),m(""))},v="w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors",j="block text-sm font-medium text-slate-300 mb-2",b="w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors";return(0,i.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(o)},className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"GÃ¶rev BaÅŸlÄ±ÄŸÄ± *"}),(0,i.jsx)("input",{type:"text",value:o.title,onChange:e=>x("title",e.target.value),placeholder:"GÃ¶rev baÅŸlÄ±ÄŸÄ±nÄ± girin",className:v,required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"AÃ§Ä±klama"}),(0,i.jsx)("textarea",{value:o.description,onChange:e=>x("description",e.target.value),placeholder:"GÃ¶rev aÃ§Ä±klamasÄ±nÄ± girin",rows:4,className:v})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"GÃ¶rev Tipi *"}),(0,i.jsxs)("select",{value:o.category,onChange:e=>x("category",e.target.value),className:b,required:!0,children:[(0,i.jsx)("option",{value:"one_time",children:"ðŸ“Œ Tek Seferlik"}),(0,i.jsx)("option",{value:"routine",children:"ðŸ”„ Rutin (Tekrarlayan)"}),(0,i.jsx)("option",{value:"project",children:"ðŸ“ Proje"}),(0,i.jsx)("option",{value:"issue_resolution",children:"ðŸ”§ Sorun Ã‡Ã¶zÃ¼mÃ¼"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"Ã–ncelik *"}),(0,i.jsxs)("select",{value:o.priority,onChange:e=>x("priority",e.target.value),className:b,required:!0,children:[(0,i.jsx)("option",{value:"low",children:"ðŸŸ¢ DÃ¼ÅŸÃ¼k"}),(0,i.jsx)("option",{value:"medium",children:"ðŸŸ¡ Orta"}),(0,i.jsx)("option",{value:"high",children:"ðŸŸ  YÃ¼ksek"}),(0,i.jsx)("option",{value:"critical",children:"ðŸ”´ Kritik"})]})]})]}),"routine"===o.category&&(0,i.jsxs)("div",{className:"glass-card p-4 border border-blue-500/30 rounded-xl space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-blue-400",children:[(0,i.jsx)(a,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-medium",children:"Tekrarlama AyarlarÄ±"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"Tekrar SÄ±klÄ±ÄŸÄ±"}),(0,i.jsxs)("select",{value:o.recurrence_pattern,onChange:e=>x("recurrence_pattern",e.target.value),className:b,children:[(0,i.jsx)("option",{value:"daily",children:"Her GÃ¼n"}),(0,i.jsx)("option",{value:"weekly",children:"Her Hafta"}),(0,i.jsx)("option",{value:"biweekly",children:"2 Haftada Bir"}),(0,i.jsx)("option",{value:"monthly",children:"Her Ay"}),(0,i.jsx)("option",{value:"yearly",children:"Her YÄ±l"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"Tekrar AralÄ±ÄŸÄ±"}),(0,i.jsx)("input",{type:"number",min:"1",max:"12",value:o.recurrence_interval,onChange:e=>x("recurrence_interval",parseInt(e.target.value)||1),className:v}),(0,i.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Ã–rn: 2 = her 2 ","daily"===o.recurrence_pattern?"gÃ¼nde":"weekly"===o.recurrence_pattern?"haftada":"ayda"," bir"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"BitiÅŸ Tarihi (Opsiyonel)"}),(0,i.jsx)("input",{type:"date",value:o.recurrence_end_date||"",onChange:e=>x("recurrence_end_date",e.target.value),className:v})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"Atanan KiÅŸi"}),(0,i.jsxs)("select",{value:o.assigned_to,onChange:e=>x("assigned_to",e.target.value),className:b,children:[(0,i.jsx)("option",{value:"",children:"SeÃ§iniz..."}),c.map(e=>(0,i.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"routine"===o.category?"Ä°lk BitiÅŸ Tarihi":"BitiÅŸ Tarihi"}),(0,i.jsx)("input",{type:"date",value:o.due_date,onChange:e=>x("due_date",e.target.value),className:v})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"Tahmini SÃ¼re (saat)"}),(0,i.jsx)("input",{type:"number",value:o.estimated_hours||"",onChange:e=>x("estimated_hours",parseInt(e.target.value)||0),placeholder:"Tahmini sÃ¼reyi girin",min:"0",className:v})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:j,children:"Etiketler"}),(0,i.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,i.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),g())},placeholder:"Etiket ekle",className:v}),(0,i.jsx)("button",{type:"button",onClick:g,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors",children:"Ekle"})]}),o.tags&&o.tags.length>0&&(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:o.tags.map(e=>(0,i.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-500/20 text-blue-400",children:[e,(0,i.jsx)("button",{type:"button",onClick:()=>{return a=e,void x("tags",o.tags?.filter(e=>e!==a)||[]);var a},className:"ml-2 text-blue-300 hover:text-white",children:"Ã—"})]},e))})]}),(0,i.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-white/10",children:[(0,i.jsx)("button",{type:"button",onClick:r,disabled:n,className:"px-4 py-2.5 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-white/5 transition-colors disabled:opacity-50",children:"Ä°ptal"}),(0,i.jsx)("button",{type:"submit",disabled:n,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm font-semibold rounded-lg hover:from-blue-500 hover:to-purple-500 hover:shadow-lg hover:shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:n?"Kaydediliyor...":"Kaydet"})]})]})};export{n as t};