import{n as e}from"./rolldown-runtime-A1xW-pDA.js";import{B as t,P as s,St as r,V as a,et as n,jt as i}from"./react-vendor-2hQaKJT0.js";import{r as l}from"./index-4_19cBdp.js";var o=e(i(),1),d=n(),c={info:"bg-blue-500/20 text-blue-400",success:"bg-emerald-500/20 text-emerald-400",warning:"bg-amber-500/20 text-amber-400",error:"bg-red-500/20 text-red-400",task:"bg-purple-500/20 text-purple-400",issue:"bg-orange-500/20 text-orange-400"},m=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/6e4),a=Math.floor(s/36e5),n=Math.floor(s/864e5);return r<1?"Az önce":r<60?`${r} dk önce`:a<24?`${a} saat önce`:n<7?`${n} gün önce`:t.toLocaleDateString("tr-TR")};const x=({notifications:e,onMarkRead:t,onMarkAllRead:n,onClose:i})=>(0,d.jsxs)("div",{className:"absolute right-0 mt-2 w-80 sm:w-96 max-h-[70vh] overflow-hidden bg-slate-800 border border-white/10 rounded-xl shadow-2xl shadow-black/50 z-50",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-white/10",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-white",children:"Bildirimler"}),e.some(e=>!e.is_read)&&n&&(0,d.jsxs)("button",{onClick:n,className:"flex items-center gap-1 text-xs text-blue-400 hover:text-blue-300 font-medium transition-colors [&>svg]:w-3.5 [&>svg]:h-3.5",children:[(0,d.jsx)(s,{className:"h-3.5 w-3.5"}),"Tümünü Okundu İşaretle"]})]}),(0,d.jsx)("div",{className:"overflow-y-auto max-h-80 scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:0===e.length?(0,d.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,d.jsx)(a,{className:"mx-auto h-10 w-10 text-slate-500 mb-2"}),(0,d.jsx)("p",{className:"text-sm text-slate-400",children:"Bildiriminiz yok"})]}):(0,d.jsx)("div",{className:"divide-y divide-white/5",children:e.map(e=>{const s=(0,d.jsx)("div",{className:l("px-4 py-3 hover:bg-white/5 transition-colors cursor-pointer",e.is_read?"":"bg-blue-500/5"),onClick:()=>(e=>{!e.is_read&&t&&t(e.id),i&&i()})(e),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[!e.is_read&&(0,d.jsx)("div",{className:"mt-1.5 w-2 h-2 rounded-full bg-blue-500 flex-shrink-0"}),(0,d.jsxs)("div",{className:l("flex-1 min-w-0",e.is_read?"ml-5":""),children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)("span",{className:l("px-2 py-0.5 text-[10px] font-semibold rounded uppercase",c[e.type]||c.info),children:e.type}),(0,d.jsx)("span",{className:"text-[11px] text-slate-500",children:m(e.created_at)})]}),(0,d.jsx)("p",{className:"text-sm font-medium text-white truncate",children:e.title}),e.message&&(0,d.jsx)("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-2",children:e.message})]})]})});return e.link?(0,d.jsx)(r,{to:e.link,children:s},e.id):(0,d.jsx)("div",{children:s},e.id)})})}),e.length>0&&(0,d.jsx)("div",{className:"px-4 py-2 border-t border-white/10",children:(0,d.jsx)(r,{to:"/notifications",className:"block text-center text-xs text-blue-400 hover:text-blue-300 font-medium transition-colors",onClick:i,children:"Tüm Bildirimleri Gör"})})]}),h=({count:e,notifications:s=[],onMarkRead:r,onMarkAllRead:a,onClick:n})=>{const[i,l]=(0,o.useState)(!1),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,d.jsxs)("div",{ref:c,className:"relative",children:[(0,d.jsxs)("button",{onClick:()=>{n&&n(),l(!i)},className:"relative p-2 text-slate-400 hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-lg transition-all duration-200 [&>svg]:w-5 [&>svg]:h-5","aria-label":`${e} okunmamış bildirim`,children:[(0,d.jsx)(t,{className:"h-5 w-5"}),e>0&&(0,d.jsx)("span",{className:"absolute -top-0.5 -right-0.5 inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-[10px] font-bold leading-none text-white bg-gradient-to-r from-red-500 to-orange-500 rounded-full shadow-lg shadow-red-500/25",children:e>99?"99+":e})]}),i&&(0,d.jsx)(x,{notifications:s,onMarkRead:r,onMarkAllRead:a,onClose:()=>l(!1)})]})};export{h as t};