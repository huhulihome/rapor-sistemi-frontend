import{n as e}from"./rolldown-runtime-A1xW-pDA.js";import{B as a,J as r,Tt as s}from"./react-vendor-DnbmBACz.js";import{i as t,r as l}from"./index-CDPVztAZ.js";var i=e(s(),1),n=r();const d=({onSubmit:e,onCancel:r,initialData:s,isLoading:d=!1})=>{const{user:o,isAdmin:c}=l(),[u,h]=(0,i.useState)({title:s?.title||"",description:s?.description||"",category:s?.category||"one_time",priority:s?.priority||"medium",assigned_to:s?.assigned_to||"",due_date:s?.due_date||"",estimated_hours:s?.estimated_hours||void 0,tags:s?.tags||[],is_recurring:!1,recurrence_pattern:"weekly",recurrence_interval:1,task_type:"one_time"}),[m,x]=(0,i.useState)([]),[p,g]=(0,i.useState)("");(0,i.useEffect)(()=>{v()},[]),(0,i.useEffect)(()=>{c||!o?.id||u.assigned_to||h(e=>({...e,assigned_to:o.id}))},[c,o?.id]),(0,i.useEffect)(()=>{"routine"===u.category?h(e=>({...e,task_type:"routine",is_recurring:!0})):"project"===u.category?h(e=>({...e,task_type:"project",is_recurring:!1})):h(e=>({...e,task_type:"one_time",is_recurring:!1}))},[u.category]);const v=async()=>{try{const{data:e,error:a}=await t.from("profiles").select("id, full_name, email, role").order("full_name");if(a)throw a;x(e||[])}catch(e){}},j=(e,a)=>{h(r=>({...r,[e]:a}))},b=()=>{p.trim()&&!u.tags?.includes(p.trim())&&(j("tags",[...u.tags||[],p.trim()]),g(""))},y="w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors",f="block text-sm font-medium text-slate-300 mb-2",N="w-full bg-slate-800 border border-white/10 rounded-lg px-4 py-3 text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors";return(0,n.jsxs)("form",{onSubmit:a=>{a.preventDefault(),e(u)},className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"GÃ¶rev BaÅŸlÄ±ÄŸÄ± *"}),(0,n.jsx)("input",{type:"text",value:u.title,onChange:e=>j("title",e.target.value),placeholder:"GÃ¶rev baÅŸlÄ±ÄŸÄ±nÄ± girin",className:y,required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"AÃ§Ä±klama"}),(0,n.jsx)("textarea",{value:u.description,onChange:e=>j("description",e.target.value),placeholder:"GÃ¶rev aÃ§Ä±klamasÄ±nÄ± girin",rows:4,className:y})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"GÃ¶rev Tipi *"}),(0,n.jsxs)("select",{value:u.category,onChange:e=>j("category",e.target.value),className:N,required:!0,children:[(0,n.jsx)("option",{value:"one_time",children:"ðŸ“Œ Tek Seferlik"}),(0,n.jsx)("option",{value:"routine",children:"ðŸ”„ Rutin (Tekrarlayan)"}),(0,n.jsx)("option",{value:"project",children:"ðŸ“ Proje"}),(0,n.jsx)("option",{value:"issue_resolution",children:"ðŸ”§ Sorun Ã‡Ã¶zÃ¼mÃ¼"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Ã–ncelik *"}),(0,n.jsxs)("select",{value:u.priority,onChange:e=>j("priority",e.target.value),className:N,required:!0,children:[(0,n.jsx)("option",{value:"low",children:"ðŸŸ¢ DÃ¼ÅŸÃ¼k"}),(0,n.jsx)("option",{value:"medium",children:"ðŸŸ¡ Orta"}),(0,n.jsx)("option",{value:"high",children:"ðŸŸ  YÃ¼ksek"}),(0,n.jsx)("option",{value:"critical",children:"ðŸ”´ Kritik"})]})]})]}),"routine"===u.category&&(0,n.jsxs)("div",{className:"glass-card p-4 border border-blue-500/30 rounded-xl space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-blue-400",children:[(0,n.jsx)(a,{className:"w-5 h-5"}),(0,n.jsx)("span",{className:"font-medium",children:"Tekrarlama AyarlarÄ±"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Tekrar SÄ±klÄ±ÄŸÄ±"}),(0,n.jsxs)("select",{value:u.recurrence_pattern,onChange:e=>j("recurrence_pattern",e.target.value),className:N,children:[(0,n.jsx)("option",{value:"daily",children:"Her GÃ¼n"}),(0,n.jsx)("option",{value:"weekly",children:"Her Hafta"}),(0,n.jsx)("option",{value:"biweekly",children:"2 Haftada Bir"}),(0,n.jsx)("option",{value:"monthly",children:"Her Ay"}),(0,n.jsx)("option",{value:"yearly",children:"Her YÄ±l"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Tekrar AralÄ±ÄŸÄ±"}),(0,n.jsx)("input",{type:"number",min:"1",max:"12",value:u.recurrence_interval,onChange:e=>j("recurrence_interval",parseInt(e.target.value)||1),className:y}),(0,n.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Ã–rn: 2 = her 2 ","daily"===u.recurrence_pattern?"gÃ¼nde":"weekly"===u.recurrence_pattern?"haftada":"ayda"," bir"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"BitiÅŸ Tarihi (Opsiyonel)"}),(0,n.jsx)("input",{type:"date",value:u.recurrence_end_date||"",onChange:e=>j("recurrence_end_date",e.target.value),className:y})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c?(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Atanan KiÅŸi"}),(0,n.jsxs)("select",{value:u.assigned_to,onChange:e=>j("assigned_to",e.target.value),className:N,children:[(0,n.jsx)("option",{value:"",children:"SeÃ§iniz..."}),m.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))]})]}):(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Atanan KiÅŸi"}),(0,n.jsx)("div",{className:"w-full bg-slate-700/50 border border-white/10 rounded-lg px-4 py-3 text-slate-300",children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Kendinize atanacak"]})}),(0,n.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"BaÅŸkasÄ±na iÅŸ atamak iÃ§in Sorunlar sayfasÄ±ndan bildirim yapÄ±n"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"routine"===u.category?"Ä°lk BitiÅŸ Tarihi":"BitiÅŸ Tarihi"}),(0,n.jsx)("input",{type:"date",value:u.due_date,onChange:e=>j("due_date",e.target.value),className:y})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Tahmini SÃ¼re (saat)"}),(0,n.jsx)("input",{type:"number",value:u.estimated_hours||"",onChange:e=>j("estimated_hours",parseInt(e.target.value)||0),placeholder:"Tahmini sÃ¼reyi girin",min:"0",className:y})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:f,children:"Etiketler"}),(0,n.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,n.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),b())},placeholder:"Etiket ekle",className:y}),(0,n.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 bg-white/5 border border-white/10 rounded-lg text-white hover:bg-white/10 transition-colors",children:"Ekle"})]}),u.tags&&u.tags.length>0&&(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:u.tags.map(e=>(0,n.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-500/20 text-blue-400",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>{return a=e,void j("tags",u.tags?.filter(e=>e!==a)||[]);var a},className:"ml-2 text-blue-300 hover:text-white",children:"Ã—"})]},e))})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-white/10",children:[(0,n.jsx)("button",{type:"button",onClick:r,disabled:d,className:"px-4 py-2.5 rounded-lg text-sm font-medium text-slate-300 hover:text-white hover:bg-white/5 transition-colors disabled:opacity-50",children:"Ä°ptal"}),(0,n.jsx)("button",{type:"submit",disabled:d,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-sm font-semibold rounded-lg hover:from-blue-500 hover:to-purple-500 hover:shadow-lg hover:shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:d?"Kaydediliyor...":"Kaydet"})]})]})};export{d as t};